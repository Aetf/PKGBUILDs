--- PKGBUILD.orig	2016-10-23 20:58:25.876210575 -0400
+++ PKGBUILD	2016-10-24 11:41:34.973285434 -0400
@@ -21,4 +21,5 @@ source=("https://www.kernel.org/pub/linu
         # standard config files for mkinitcpio ramdisk
         'linux.preset'
+        'hid-apple-swap-fn-ctrl.patch'
         'change-default-console-loglevel.patch'
         )
@@ -31,7 +32,9 @@ sha256sums=('3e9150065f193d3d94bcf46a1fe
             '93a4ad4f6c7bb9296fddec436ed7477a5a5c11cf4d6e68482fa6610442cbcb1f'
             'f0d90e756f14533ee67afda280500511a62465b4f76adcc5effa95a40045179c'
+            'e125693abf49cb210cca6592529fcd98666e166c2874e66ddb3c82188ad89d5b'
             '1256b241cd477b265a3c2d64bdc19ffe3c9bbcee82ea3994c590c2c76e767d99')
 validpgpkeys=(
               'ABAF11C65A2970B130ABE3C479BE3E4300411886' # Linus Torvalds
+            'e125693abf49cb210cca6592529fcd98666e166c2874e66ddb3c82188ad89d5b'
               '647F28654894E3BD457199BE38DBBDC86092693E' # Greg Kroah-Hartman
              )
@@ -53,4 +56,7 @@ prepare() {
   patch -p1 -i "${srcdir}/change-default-console-loglevel.patch"
 
+  # add more tuneable parameters for hid-apple module
+  patch -Np1 -i "${srcdir}/hid-apple-swap-fn-ctrl.patch"
+
   if [ "${CARCH}" = "x86_64" ]; then
     cat "${srcdir}/config.x86_64" > ./.config
@@ -80,4 +86,8 @@ prepare() {
   #make oldconfig # using old config from previous kernel version
   # ... or manually edit .config
+  # Enable builtin Intel i915 module
+  ./scripts/config \
+                   --enable CONFIG_DRM \
+                   --enable CONFIG_DRM_I915
 
   # rewrite configuration
